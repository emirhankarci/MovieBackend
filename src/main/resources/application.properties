spring.application.name=MovieBackend

# --- Security ---
# Disable default user generation (we use JWT auth)
spring.security.user.name=disabled
spring.security.user.password=disabled

# --- Veritaban? Ba?lant?s? ---
spring.datasource.url=jdbc:postgresql://localhost:5433/moviedb
spring.datasource.username=myuser
spring.datasource.password=12345

spring.datasource.driver-class-name=org.postgresql.Driver

# --- JPA---
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# --- Flyway ---
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration

# --- Gemini AI ---
# GEMINI_API_KEY environment variable must be set
gemini.api.timeout=30000

# --- TMDB ---
# TMDB_API_KEY environment variable must be set

# --- Movie Quality Filter ---
movie.quality.min-rating=6.5
movie.quality.min-votes=1000

# --- Redis Cache ---
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.timeout=2000ms
spring.data.redis.repositories.enabled=false
cache.default-ttl-hours=24


# --- Circuit Breaker (Resilience4j) ---
# TMDB Circuit Breaker
resilience4j.circuitbreaker.tmdb.failure-rate-threshold=50
resilience4j.circuitbreaker.tmdb.minimum-number-of-calls=5
resilience4j.circuitbreaker.tmdb.wait-duration-in-open-state=30
resilience4j.circuitbreaker.tmdb.permitted-calls-in-half-open=3
resilience4j.circuitbreaker.tmdb.sliding-window-size=10

# Gemini Circuit Breaker
resilience4j.circuitbreaker.gemini.failure-rate-threshold=50
resilience4j.circuitbreaker.gemini.minimum-number-of-calls=3
resilience4j.circuitbreaker.gemini.wait-duration-in-open-state=60
resilience4j.circuitbreaker.gemini.permitted-calls-in-half-open=2
resilience4j.circuitbreaker.gemini.sliding-window-size=5


# --- Scheduled Jobs ---
# Daily Suggestion Scheduler
scheduler.daily-suggestion.enabled=true
scheduler.daily-suggestion.cron=0 0 6 * * *
scheduler.daily-suggestion.batch-size=50

# Cache Warm-Up Scheduler
scheduler.cache-warmup.enabled=true
scheduler.cache-warmup.interval=14400000

# Token Cleanup Scheduler
scheduler.token-cleanup.enabled=true
scheduler.token-cleanup.cron=0 0 3 * * *
scheduler.token-cleanup.revoked-retention-days=7

# --- Suggestion Refresh ---
suggestion.refresh.default-limit=5
